{% extends "base.html" %}
{% block content %}
<h3>Hello, {{ student.user.username }}</h3>
<p>Your attendance percentage: <strong>{{ attendance_percentage }}%</strong></p>

<h5 class="mt-3">Attendance Records</h5>
<table class="table table-striped">
  <thead><tr><th>Date</th><th>Status</th></tr></thead>
  <tbody>
    {% for r in attendance_records %}
    <tr>
      <td>{{ r.date }}</td>
      <td>
        {% if r.present %}
          <span class="text-success">Present</span>
        {% else %}
          <span class="text-danger">Absent</span>
        {% endif %}
      </td>
    </tr>
    {% empty %}
    <tr><td colspan="2">No records yet.</td></tr>
    {% endfor %}
  </tbody>
</table>

<h5 class="mt-4">Report a Problem</h5>
<form method="post">
  {% csrf_token %}
  {{ form.message }}
  <button class="btn btn-danger mt-2">Submit</button>
</form>

<h5 class="mt-4">My Complaints</h5>
<ul class="list-group">
  {% for c in complaints %}
  <li class="list-group-item d-flex justify-content-between align-items-center">
    <span>{{ c.date }} â€” {{ c.message }}</span>
    {% if c.resolved %}
      <span class="badge bg-success">Resolved</span>
    {% else %}
      <span class="badge bg-warning text-dark">Open</span>
    {% endif %}
  </li>
  {% empty %}
  <li class="list-group-item">No complaints yet.</li>
  {% endfor %}
</ul>
{% endblock %}
